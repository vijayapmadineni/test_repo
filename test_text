AWSTemplateFormatVersion: "2010-09-09"
Resources:
  MyS3Bucket:
    Type: "AWS::S3::Bucket"
    Properties:
      BucketName: "mys3bucket"
      LifecycleConfiguration:
        Rules:
          - Id: "DeleteOldFilesFolder1"
            Prefix: "mys3folder/mys3folder2/"  # Rule for first folder
            Status: "Enabled"
            ExpirationInDays: 60  # Automatically delete files older than 60 days in this folder

          - Id: "DeleteOldFilesFolder2"
            Prefix: "anotherfolder/subfolder/"  # Rule for second folder
            Status: "Enabled"
            ExpirationInDays: 90  # Automatically delete files older than 90 days in this folder

          - Id: "DeleteOldFilesFolder3"
            Prefix: "thirdfolder/"  # Rule for third folder
            Status: "Enabled"
            ExpirationInDays: 30  # Automatically delete files older than 30 days in this folder
